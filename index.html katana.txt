<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Heritage Barber | Estilo & Tradici√≥n</title>
    
    <!-- LIBRER√çAS EXTERNAS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Plus+Jakarta+Sans:wght@200;400;700;800&display=swap');
        
        :root {
            --brand-color: #d4af37; /* Dorado / Oro */
            --brand-hover: #b8960c;
            --ig-gradient: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            --wa-color: #25d366;
            --bg-color: #080808;
            --text-color: #ffffff;
            --card-bg: rgba(255, 255, 255, 0.02);
            --card-border: rgba(212, 175, 55, 0.15);
        }

        .light-mode {
            --bg-color: #fdfdfd;
            --text-color: #1a1a1a;
            --card-bg: rgba(0, 0, 0, 0.03);
            --card-border: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            scroll-behavior: smooth;
            overflow-x: hidden;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.4s ease, color 0.4s ease;
            -webkit-tap-highlight-color: transparent;
        }

        h1, h2, .accent-font { font-family: 'Cinzel', serif; }

        #bg-canvas {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; pointer-events: none;
        }

        .accent-text { color: var(--brand-color); }
        .accent-bg { background-color: var(--brand-color); }

        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--card-border);
            border-radius: 40px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* ZOOM SYSTEM */
        .zoom-container {
            position: relative;
            overflow: hidden;
            border-radius: 35px;
            cursor: zoom-in;
            background: #111;
            touch-action: none;
        }
        .zoom-image {
            width: 100%; height: 100%; object-fit: cover;
            display: block; transition: transform 0.1s ease-out;
            will-change: transform; transform-origin: center;
        }

        .modal-container {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 92%; max-width: 480px;
            z-index: 1000; padding: 30px;
            border-radius: 40px;
            box-shadow: 0 40px 80px -12px rgba(0,0,0,0.8);
            border: 1px solid rgba(212, 175, 55, 0.3);
            max-height: 85vh; overflow-y: auto;
            visibility: hidden; opacity: 0;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            background: #0d0d0d;
            color: white;
        }
        .modal-container.active { visibility: visible; opacity: 1; transform: translate(-50%, -50%) scale(1); }

        .overlay {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(10px);
            z-index: 900; display: none; opacity: 0;
            transition: opacity 0.3s ease;
        }
        .overlay.active { display: block; opacity: 1; }

        #toast {
            visibility: hidden; min-width: 280px;
            background-color: var(--brand-color); color: #000;
            text-align: center; border-radius: 50px;
            padding: 16px; position: fixed; z-index: 2000;
            left: 50%; bottom: 40px; transform: translateX(-50%); 
            font-weight: 800; text-transform: uppercase;
        }
        #toast.show { visibility: visible; animation: toastIn 0.4s, toastOut 0.4s 2.6s; }

        .admin-input {
            width: 100%; padding: 12px 20px;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 15px; outline: none; font-weight: bold; color: white;
            margin-bottom: 12px;
        }

        .day-badge {
            padding: 12px; border-radius: 12px;
            border: 1px solid var(--card-border);
            cursor: pointer; font-size: 10px; font-weight: 800;
            transition: all 0.2s; text-align: center;
            text-transform: uppercase;
        }
        .day-badge.selected { background: var(--brand-color); color: black; border-color: var(--brand-color); }

        .whatsapp-float { position: fixed; bottom: 25px; right: 25px; background: var(--wa-color); color: white; width: 54px; height: 54px; border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 24px; z-index: 100; transition: transform 0.3s; }
        
        .calc-label {
            display: block; font-size: 9px; font-weight: 800; text-transform: uppercase; 
            opacity: 0.4; margin-left: 8px; margin-bottom: 4px;
        }

        /* Theme Switcher Styles */
        .theme-toggle {
            position: relative; width: 60px; height: 30px;
            background: var(--card-bg); border: 1px solid var(--card-border);
            border-radius: 20px; cursor: pointer;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 6px; overflow: hidden;
        }
        .theme-toggle-dot {
            position: absolute; left: 4px; width: 22px; height: 22px;
            background: var(--brand-color); border-radius: 50%;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 1;
        }
        .light-mode .theme-toggle-dot { transform: translateX(30px); }
        
        @keyframes toastIn { from {bottom: 0; opacity: 0;} to {bottom: 40px; opacity: 1;} }
        @keyframes toastOut { from {bottom: 40px; opacity: 1;} to {bottom: 0; opacity: 0;} }
    </style>
</head>
<body class="theme-dark">

    <canvas id="bg-canvas"></canvas>
    <div id="toast">Notificaci√≥n</div>
    <div id="modal-overlay" class="overlay"></div>

    <!-- NAVEGACI√ìN -->
    <nav class="fixed w-full z-50 transition-all duration-300 h-24 flex items-center px-6" id="navbar">
        <div class="max-w-7xl mx-auto w-full flex justify-between items-center">
            <div class="flex flex-col cursor-pointer" onclick="window.scrollTo(0,0)">
                <span class="text-2xl font-black tracking-tighter uppercase italic leading-none">
                    HERITAGE
                </span>
                <span class="accent-text text-xs font-bold tracking-[0.3em] uppercase">
                    Barbershop
                </span>
            </div>
            
            <div class="flex items-center space-x-4 md:space-x-8">
                <div class="hidden md:flex items-center space-x-8 text-[10px] font-black uppercase tracking-widest">
                    <a href="#inicio" class="hover:accent-text transition-colors">Inicio</a>
                    <a href="#servicios" class="hover:accent-text transition-colors">Servicios</a>
                    <a href="#staff" class="hover:accent-text transition-colors">Nuestro Staff</a>
                </div>

                <!-- Theme Toggle -->
                <div class="theme-toggle" id="theme-switch">
                    <i class="fa-solid fa-moon text-[10px] opacity-30"></i>
                    <div class="theme-toggle-dot"></div>
                    <i class="fa-solid fa-sun text-[10px] opacity-30"></i>
                </div>

                <button id="admin-trigger" class="px-4 h-9 flex items-center justify-center rounded-full bg-white/5 border border-white/10 text-[9px] font-black tracking-widest hover:bg-white/10 transition-all uppercase">
                    Admin
                </button>
            </div>
        </div>
    </nav>

    <!-- HERO -->
    <header id="inicio" class="pt-52 pb-24 relative">
        <div class="max-w-7xl mx-auto px-6 text-center lg:text-left grid lg:grid-cols-2 gap-16 items-center">
            <div>
                <h1 class="text-6xl md:text-[6.5rem] font-black leading-[0.85] uppercase tracking-tighter mb-8">
                    CORTES CON<br><span class="accent-text">CAR√ÅCTER.</span>
                </h1>
                <p class="opacity-40 mb-10 max-w-sm font-medium text-base mx-auto lg:mx-0 uppercase tracking-tighter leading-relaxed">
                    No es solo un corte, es una experiencia de cuidado personal premium en el coraz√≥n de la ciudad.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
                    <a href="#servicios" class="accent-bg text-black px-10 py-4 rounded-full font-black uppercase text-[10px] tracking-widest inline-block shadow-[0_10px_30px_rgba(212,175,55,0.3)]">
                        Ver Servicios
                    </a>
                    <a href="#staff" class="border border-white/10 hover:bg-white/5 px-10 py-4 rounded-full font-black uppercase text-[10px] tracking-widest inline-block">
                        Conoce al Equipo
                    </a>
                </div>
            </div>
            <div class="zoom-container shadow-2xl border border-white/5" id="hero-zoom">
                <img src="https://images.unsplash.com/photo-1503951914875-452162b0f3f1?q=80&w=1000&auto=format&fit=crop" class="zoom-image" alt="Barber Shop Interior">
            </div>
        </div>
    </header>

    <!-- SERVICIOS -->
    <main id="servicios" class="py-32">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex justify-between items-end mb-16">
                <h2 class="text-5xl font-black uppercase tracking-tighter">
                    NUESTROS<br><span class="accent-text">SERVICIOS</span>
                </h2>
                <p class="hidden md:block opacity-30 text-[10px] font-bold uppercase tracking-[0.2em]">Tradici√≥n & Modernidad</p>
            </div>
            <div id="service-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
                <!-- Se cargar√° din√°micamente -->
                <div class="col-span-full py-20 text-center opacity-30 font-bold uppercase tracking-widest">
                    <i class="fa-solid fa-scissors text-4xl mb-4 block"></i>
                    Cargando men√∫ de servicios...
                </div>
            </div>
        </div>
    </main>

    <!-- STAFF -->
    <section id="staff" class="py-32 border-y border-white/5 bg-white/[0.02]">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-20">
                <h2 class="text-4xl font-black uppercase mb-4">Nuestro <span class="accent-text">Staff</span></h2>
                <p class="opacity-40 text-[10px] font-bold uppercase tracking-[0.3em]">Maestros de la navaja</p>
            </div>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="glass-card p-8 text-center group">
                    <div class="w-24 h-24 rounded-full bg-gradient-to-tr from-yellow-600 to-yellow-200 mx-auto mb-6 flex items-center justify-center text-3xl text-black font-black">M</div>
                    <h3 class="text-xl font-black uppercase italic mb-2">Mateo "The Blade"</h3>
                    <p class="text-[10px] opacity-40 font-black uppercase mb-4">Especialista en Fades & Barbas</p>
                    <p class="text-xs leading-relaxed opacity-60 uppercase">10 a√±os de trayectoria perfeccionando el degradado cl√°sico americano.</p>
                </div>
                <div class="glass-card p-8 text-center group border-brand-color/40 bg-white/5">
                    <div class="w-24 h-24 rounded-full bg-gradient-to-tr from-yellow-600 to-yellow-200 mx-auto mb-6 flex items-center justify-center text-3xl text-black font-black">E</div>
                    <h3 class="text-xl font-black uppercase italic mb-2">Enzo Rossi</h3>
                    <p class="text-[10px] accent-text font-black uppercase mb-4">Master Barber & Founder</p>
                    <p class="text-xs leading-relaxed opacity-60 uppercase">Creador de estilos vanguardistas y experto en afeitado tradicional a navaja.</p>
                </div>
                <div class="glass-card p-8 text-center group">
                    <div class="w-24 h-24 rounded-full bg-gradient-to-tr from-yellow-600 to-yellow-200 mx-auto mb-6 flex items-center justify-center text-3xl text-black font-black">L</div>
                    <h3 class="text-xl font-black uppercase italic mb-2">Lucas Old-School</h3>
                    <p class="text-[10px] opacity-40 font-black uppercase mb-4">Cortes Cl√°sicos & Tijera</p>
                    <p class="text-xs leading-relaxed opacity-60 uppercase">El guardi√°n de la vieja escuela. Especialista en peinados de los a√±os 50.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER INFO -->
    <footer class="py-24">
        <div class="max-w-3xl mx-auto px-6 text-center">
            <h2 class="text-2xl font-black uppercase mb-8">Ubicaci√≥n & Horarios</h2>
            <div class="grid grid-cols-2 gap-8 mb-12">
                <div class="text-left">
                    <span class="calc-label">D√≥nde estamos</span>
                    <p class="text-sm font-bold uppercase">Av. Santa Fe 1234, CABA</p>
                </div>
                <div class="text-right">
                    <span class="calc-label">Atenci√≥n</span>
                    <p class="text-sm font-bold uppercase">Lun a S√°b: 10hs - 20hs</p>
                </div>
            </div>
            <p class="opacity-20 text-[9px] font-black uppercase tracking-widest">¬© 2025 THE HERITAGE BARBERSHOP - PREMIUM GROOMING SERVICE</p>
        </div>
    </footer>

    <!-- MODAL RESERVA -->
    <div id="checkout-panel" class="modal-container">
        <div id="checkout-content">
            <h2 id="checkout-name" class="text-2xl font-black uppercase italic mb-2">Corte</h2>
            <p id="checkout-price" class="accent-text text-xl font-black mb-6">$0</p>
            
            <span class="calc-label">Selecciona el d√≠a de tu preferencia</span>
            <div id="checkout-days" class="grid grid-cols-3 gap-2 mb-8">
                <span class="day-badge checkout-day" data-day="Lunes">Lunes</span>
                <span class="day-badge checkout-day" data-day="Martes">Martes</span>
                <span class="day-badge checkout-day" data-day="Mi√©rcoles">Mi√©rcoles</span>
                <span class="day-badge checkout-day" data-day="Jueves">Jueves</span>
                <span class="day-badge checkout-day" data-day="Viernes">Viernes</span>
                <span class="day-badge checkout-day" data-day="S√°bado">S√°bado</span>
            </div>
            
            <button id="whatsapp-order-btn" class="w-full bg-green-500 text-white py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest flex items-center justify-center gap-2">
                <i class="fa-brands fa-whatsapp text-lg"></i> Consultar Disponibilidad
            </button>
            <button onclick="UI.close()" class="mt-4 w-full text-[9px] opacity-40 uppercase font-black">Volver</button>
        </div>
    </div>

    <!-- MODAL ADMIN -->
    <div id="admin-panel" class="modal-container">
        <div id="login-view">
            <h2 class="text-xl font-black uppercase mb-6 italic text-center">Acceso Admin</h2>
            <input type="password" id="admin-password-input" class="admin-input text-center tracking-[0.5em]" placeholder="CONTRASE√ëA">
            <button id="admin-login-btn" class="w-full accent-bg text-black py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest">Ingresar</button>
            <button onclick="UI.close()" class="mt-4 w-full text-[9px] opacity-40 uppercase font-black">Cerrar</button>
        </div>

        <div id="dashboard-view" class="hidden">
            <h2 class="text-xl font-black uppercase mb-6 italic text-center">Gestionar Servicios</h2>
            <div class="space-y-1">
                <span class="calc-label">Nombre del servicio</span>
                <input type="text" id="p-name" class="admin-input" placeholder="Ej: Corte + Barba">
                
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <div>
                        <span class="calc-label text-green-400">Precio de Venta ($)</span>
                        <input type="number" id="p-price" class="admin-input" placeholder="0">
                    </div>
                    <div>
                        <span class="calc-label">Imagen (Archivo)</span>
                        <input type="file" id="p-img-file" accept="image/*" class="admin-input" style="font-size: 10px; padding: 10px;">
                    </div>
                </div>

                <button id="p-save-btn" class="w-full accent-bg text-black py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest mb-2">Publicar Servicio</button>
                <button onclick="UI.close()" class="w-full text-[9px] opacity-40 uppercase font-black py-2">Salir</button>
            </div>
        </div>
    </div>

    <!-- BOTONES SOCIALES -->
    <a href="https://wa.me/5491156474987" target="_blank" class="whatsapp-float shadow-2xl"><i class="fa-brands fa-whatsapp"></i></a>
    
<script type="module">
    // --- CONFIGURACI√ìN (Misma l√≥gica de tu archivo original) ---
    const CONFIG = {
        OWNER: 'lautyortiz987-wq', // Cambia a tu usuario de Github
        REPO: 'barberia-heritage', // Cambia a tu repo de Github
        PATH: 'servicios.json',
        IMGBB_KEY: 'd4cde83f6e49f61e9940910034f671cf', // Tu Key de ImgBB
        TOKEN: sessionStorage.getItem('gh_token') || "" 
    };
    
    const state = { 
        services: [],
        selectedService: null,
        selectedDay: null,
        isLightMode: false
    };

    // --- LOGICA DE DATOS ---
    async function fetchServices() {
        try {
            // Hardcodeamos unos iniciales por si no hay repo configurado a√∫n
            const res = await fetch(`https://raw.githubusercontent.com/${CONFIG.OWNER}/${CONFIG.REPO}/main/${CONFIG.PATH}?t=${Date.now()}`);
            if (res.ok) {
                state.services = await res.json();
            } else {
                // Mock inicial para visualizaci√≥n
                state.services = [
                    { name: "Corte Heritage", price: "2500", img: "https://images.unsplash.com/photo-1599351431247-f10b218648e8?auto=format&fit=crop&q=80&w=500" },
                    { name: "Perfilado de Barba", price: "1800", img: "https://images.unsplash.com/photo-1621605815841-28d944f33bb2?auto=format&fit=crop&q=80&w=500" },
                    { name: "Corte + Barba + Lavado", price: "4000", img: "https://images.unsplash.com/photo-1512690196236-d5a232933d44?auto=format&fit=crop&q=80&w=500" }
                ];
            }
            renderGrid();
        } catch (e) { renderGrid(); }
    }

    async function saveToGithub(newData) {
        const token = sessionStorage.getItem('gh_token'); 
        if (!token) { UI.notify("Error: No autenticado"); return false; }
        
        try {
            const fileRes = await fetch(`https://api.github.com/repos/${CONFIG.OWNER}/${CONFIG.REPO}/contents/${CONFIG.PATH}`, {
                headers: { "Authorization": `token ${token}` }
            });
            const fileData = await fileRes.json();
            const sha = fileData.sha;
            
            const updateRes = await fetch(`https://api.github.com/repos/${CONFIG.OWNER}/${CONFIG.REPO}/contents/${CONFIG.PATH}`, {
                method: "PUT",
                headers: { "Authorization": `token ${token}`, "Content-Type": "application/json" },
                body: JSON.stringify({
                    message: "Update services",
                    content: btoa(unescape(encodeURIComponent(JSON.stringify(newData, null, 2)))),
                    sha: sha
                })
            });
            return updateRes.ok;
        } catch (e) { return false; }
    }

    async function uploadImage(file) {
        const formData = new FormData();
        formData.append('image', file);
        const res = await fetch(`https://api.imgbb.com/1/upload?key=${CONFIG.IMGBB_KEY}`, { method: 'POST', body: formData });
        const data = await res.json();
        return data.success ? data.data.url : null;
    }

    // --- INTERFAZ ---
    window.UI = {
        openModal: (id) => {
            document.getElementById('modal-overlay').classList.add('active');
            document.getElementById(id).classList.add('active');
        },
        close: () => {
            document.querySelectorAll('.modal-container, .overlay').forEach(el => el.classList.remove('active'));
        },
        notify: (msg) => {
            const t = document.getElementById('toast');
            t.innerText = msg; t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        },
        toggleTheme: () => {
            state.isLightMode = !state.isLightMode;
            document.body.classList.toggle('light-mode', state.isLightMode);
            UI.notify(state.isLightMode ? 'Modo Dorado Claro' : 'Modo Nocturno');
        },
        initZoom: (container) => {
            if(!container) return;
            const img = container.querySelector('img');
            container.onmousemove = (e) => {
                const rect = container.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                img.style.transformOrigin = `${x}px ${y}px`;
                img.style.transform = "scale(2.0)";
            };
            container.onmouseleave = () => img.style.transform = "scale(1)";
        },
        openCheckout: (index) => {
            const s = state.services[index];
            state.selectedService = s;
            state.selectedDay = null;
            document.getElementById('checkout-name').innerText = s.name;
            document.getElementById('checkout-price').innerText = `$${Number(s.price).toLocaleString()}`;
            document.querySelectorAll('.checkout-day').forEach(b => b.classList.remove('selected'));
            UI.openModal('checkout-panel');
        }
    };

    function renderGrid() {
        const grid = document.getElementById('service-grid');
        const isStaff = sessionStorage.getItem('gh_token') !== null;
        
        grid.innerHTML = state.services.map((s, i) => `
            <div class="glass-card p-6 relative group overflow-hidden">
                ${isStaff ? `<button onclick="deleteService(${i})" class="absolute top-4 right-4 z-10 bg-red-500 text-white w-8 h-8 rounded-full flex items-center justify-center"><i class="fa-solid fa-trash text-[10px]"></i></button>` : ''}
                <div class="zoom-container aspect-square mb-6" id="zoom-${i}" onclick="UI.openCheckout(${i})">
                    <img src="${s.img}" class="zoom-image" loading="lazy">
                </div>
                <div class="flex justify-between items-start" onclick="UI.openCheckout(${i})">
                    <div>
                        <h3 class="text-lg font-black uppercase italic">${s.name}</h3>
                        <p class="accent-text font-black text-xl mt-1">$${Number(s.price).toLocaleString()}</p>
                    </div>
                    <button class="w-10 h-10 rounded-full border border-brand-color/30 flex items-center justify-center accent-text hover:bg-brand-color hover:text-black transition-all">
                        <i class="fa-solid fa-calendar-plus"></i>
                    </button>
                </div>
            </div>
        `).join('');
        
        state.services.forEach((_, i) => UI.initZoom(document.getElementById(`zoom-${i}`)));
    }

    // --- EVENTOS ---
    document.getElementById('theme-switch').onclick = UI.toggleTheme;
    document.getElementById('admin-trigger').onclick = () => UI.openModal('admin-panel');
    document.getElementById('modal-overlay').onclick = UI.close;
    
    document.querySelectorAll('.checkout-day').forEach(b => {
        b.onclick = () => {
            document.querySelectorAll('.checkout-day').forEach(x => x.classList.remove('selected'));
            b.classList.add('selected');
            state.selectedDay = b.dataset.day;
        };
    });

    document.getElementById('admin-login-btn').onclick = () => {
        const token = document.getElementById('admin-password-input').value;
        if(token.startsWith("ghp_")) {
            sessionStorage.setItem('gh_token', token);
            document.getElementById('login-view').classList.add('hidden');
            document.getElementById('dashboard-view').classList.remove('hidden');
            renderGrid();
            UI.notify("Panel de Control Activado");
        } else {
            UI.notify("Token inv√°lido");
        }
    };

    document.getElementById('p-save-btn').onclick = async () => {
        const name = document.getElementById('p-name').value;
        const price = document.getElementById('p-price').value;
        const file = document.getElementById('p-img-file').files[0];
        
        if(!name || !price || !file) return UI.notify("Completa todos los campos");
        
        UI.notify("Procesando imagen...");
        const imgUrl = await uploadImage(file);
        if(!imgUrl) return;
        
        const updated = [...state.services, { name, price, img: imgUrl }];
        if(await saveToGithub(updated)) {
            state.services = updated;
            renderGrid();
            UI.close();
            UI.notify("Servicio publicado con √©xito");
        }
    };

    window.deleteService = async (index) => {
        if(!confirm("¬øEliminar este servicio del men√∫?")) return;
        const updated = state.services.filter((_, i) => i !== index);
        if(await saveToGithub(updated)) {
            state.services = updated;
            renderGrid();
        }
    };

    document.getElementById('whatsapp-order-btn').onclick = () => {
        if(!state.selectedDay) return UI.notify("Elige un d√≠a tentativo");
        const msg = `Hola! Quiero reservar un turno para:%0Aüíà *${state.selectedService.name}*%0AüìÖ D√≠a: *${state.selectedDay}*%0A¬øTienen disponibilidad?`;
        window.open(`https://wa.me/5491156474987?text=${msg}`, '_blank');
    };

    // --- ANIMACI√ìN DE FONDO ---
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; initParticles(); }
    function initParticles() {
        particles = [];
        const count = Math.floor(window.innerWidth / 15); 
        for(let i=0; i<count; i++) {
            particles.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, r: Math.random() * 2 + 0.5, v: Math.random() * 0.4 + 0.1 });
        }
    }
    window.onresize = resize; resize();
    function anim() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = state.isLightMode ? "rgba(0,0,0,0.15)" : "rgba(212,175,55,0.3)"; 
        for(let p of particles) {
            ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
            p.y += p.v; if(p.y > canvas.height) p.y = -10;
        }
        requestAnimationFrame(anim);
    }

    window.onload = () => { anim(); fetchServices(); UI.initZoom(document.getElementById('hero-zoom')); }
</script>
</body>
</html>